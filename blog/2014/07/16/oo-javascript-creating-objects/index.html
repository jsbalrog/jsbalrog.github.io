
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>OO javascript: Creating objects - JS Balrog</title>
    <meta name="author" content="Ted Jenkins">
    
	<meta name="description" content="For a few posts we’ll talk a bit about programming javascript in such a way as to take advantage of OO principles of reuse, including encapsulation, &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="JS Balrog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='http://fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <script src="/javascripts/ajaxify.js"></script>
   
    
    
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-50193650-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        JS Balrog
    </div>
</h1>
<h3 class="subtitle" style="margin-top: 20px; font-family: 'Slackey'; text-align: center;">Only lost to an old guy with a beard and a staff.</h3>
<br>

<ul id="social-links" style="text-align:center">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/jsbalrog" class="github" title="Github"></a>
  </li>
  
  
  <!-- Google Plus -->
  <li>
  <a href="http://plus.google.com/108288524775655786606?rel=author" class="google" title="Google+"></a>
  </li>
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/jsbalrog" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/blog/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload --> 
    <div id="content" class="inner">
        <article class="post">
	<h2 class="title">OO Javascript: Creating Objects</h2>
	<div class="entry-content"><p>For a few posts we’ll talk a bit about programming javascript in such a way as to take advantage of OO principles of reuse, including encapsulation,
inheritance, and polymorphism. Javascript of course has no concept of such things as classes; therefore, we use common javascript principles in order to
take advantage of such things–even for how we define a javascript “object”.
This post in particular will focus on javascript object creation.</p>

<!-- more -->


<p>There really is no way to define a class in javascript. ECMA-262 defines an object as an “unordered collection of properties each of which contains a
primitive value, object, or function.” As such, a javascript object is really nothing more than an array of values (which could be any combination of
primitives, other objects, or functions) that are named. This means that an object in javascript is more closely aligned to what I as a traditional
OO-language developer think of as a hash table or a map–a grouping of name-value pairs.</p>

<h3>Creating objects</h3>

<p>Here’s how you’d typically create an object in javascript:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">guitar</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
</span><span class='line'><span class="nx">guitar</span><span class="p">.</span><span class="nx">brand</span> <span class="o">=</span> <span class="s2">&quot;Fender&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">guitar</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="s2">&quot;Stratocaster&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">guitar</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="mi">1963</span><span class="p">;</span>
</span><span class='line'><span class="nx">guitar</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;Electric&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">guitar</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">brand</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Looks good. The problem with this traditional approach is that if you were to create multiple guitar objects, you’d be duplicating a lot of code. Dang! This is where programming patterns can help.</p>

<h3>The factory pattern</h3>

<p>Let&rsquo;s set up a bit of code that acts like a factory&mdash;in other
words, it is responsible for creating a guitar whenever we call it.
We&rsquo;ll call it <code>createGuitar</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">createGuitar</span><span class="p">(</span><span class="nx">brand</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">year</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
</span><span class='line'>    <span class="nx">o</span><span class="p">.</span><span class="nx">brand</span> <span class="o">=</span> <span class="nx">brand</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">o</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">model</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">o</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">year</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">o</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">o</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">brand</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>&hellip;And then this factory function could be used to build multiple objects with little code duplication:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">guitar1</span> <span class="o">=</span> <span class="nx">createGuitar</span><span class="p">(</span><span class="s2">&quot;Fender&quot;</span><span class="p">,</span> <span class="s2">&quot;Stratocaster&quot;</span><span class="p">,</span> <span class="mi">1963</span><span class="p">,</span> <span class="s2">&quot;electric&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">guitar2</span> <span class="o">=</span> <span class="nx">createGuitar</span><span class="p">(</span><span class="s2">&quot;Gibson&quot;</span><span class="p">,</span> <span class="s2">&quot;Hummingbird&quot;</span><span class="p">,</span> <span class="mi">1957</span><span class="p">,</span> <span class="s2">&quot;acoustic&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>The problem with the factory pattern is that we can’t identify what type of an object guitar1 or guitar2 is. Change the names of the variables, and it’s even more potentially confusing. That&rsquo;s
where the constructor pattern helps.</p>

<h3>The constructor pattern</h3>

<p>Let&rsquo;s create a function that&mdash;like the factory pattern&mdash;is responsible
for creating our objects. However, let&rsquo;s take advantage of some built-in
features of javascript itself (specifically the <code>new</code> operator and the
<code>this</code> keyword) to be able to identify the object type:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">Guitar</span><span class="p">(</span><span class="nx">brand</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">year</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">brand</span> <span class="o">=</span> <span class="nx">brand</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">model</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">year</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">brand</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">guitar1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Guitar</span><span class="p">(</span><span class="s2">&quot;Fender&quot;</span><span class="p">,</span> <span class="s2">&quot;Stratocaster&quot;</span><span class="p">,</span> <span class="mi">1963</span><span class="p">,</span> <span class="s2">&quot;electric&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">guitar2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Guitar</span><span class="p">(</span><span class="s2">&quot;Gibson&quot;</span><span class="p">,</span> <span class="s2">&quot;Hummingbird&quot;</span><span class="p">,</span> <span class="mi">1957</span><span class="p">,</span> <span class="s2">&quot;acoustic&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note that this constructor is just a function named Guitar (with an uppercase “G”, as javascript convention dictates). No object being created, the properties and methods are assigned to the “this” object, and no return statement. Calling a constructor with the “new” operator causes four steps:
1. Create a new object.
2. Assign the scope of the constructor to the new object so <code>this</code> points to the new object.
3. Execute the code inside the constructor which adds properties to the new object.
4. Return the new object.</p>

<p>Furthermore, each of these objects has a “constructor” property that points back to the “Guitar” constructor/function. This property was intended for use in identifying the object type:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">guitar1</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">==</span> <span class="nx">Guitar</span> <span class="c1">// true</span>
</span><span class='line'><span class="nx">guitar2</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">==</span> <span class="nx">Guitar</span> <span class="c1">// true</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is an advantage over the Factory pattern. The “instanceof” operator is considered to be a safer way of determining type.</p>

<p>The only difference between javascript “constructors” and other javascript functions is the way they are called (with the <code>new</code> operator).
Any function that is called with the <code>new</code> operator acts as a constructor. So, what if I call it without the <code>new</code> operator? The properties
get added to the <code>window</code> object. <code>this</code> then points to the “Global” object when a function is called in the global scope. Using <code>new</code>
assigns the scope of the function to the new object represented by the variable (<code>var</code>).</p>

<p>So, any possible problems here?</p>

<p>Try this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">guitar1</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">==</span> <span class="nx">guitar2</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>What do you think the result is?</p>

<p>If you said &ldquo;false&rdquo;, give yourself a brownie.
For every object created with a constructor pattern, a new method/function instance is created for each object instance–they are not the same instance of “Function”. The constructor is really doing the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">Guitar</span><span class="p">(</span><span class="nx">brand</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">year</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">brand</span> <span class="o">=</span> <span class="nx">brand</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">model</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">year</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">brand</span><span class="p">));</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>For the function/method <code>getBrand</code>, a new Function object
is created every time a new Guitar is created.</p>

<p>We really don’t need two instances of Function that do the same thing. One workaround is to move the function definition outside of the constructor:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">Guitar</span><span class="p">(</span><span class="nx">brand</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">year</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">brand</span> <span class="o">=</span> <span class="nx">brand</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">model</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">year</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">=</span> <span class="nx">getBrand</span><span class="p">;</span> <span class="c1">// set the getBrand variable to the global</span>
</span><span class='line'><span class="nx">getBrand</span><span class="p">()</span> <span class="kd">function</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// getBrand defined here is a global function</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">getBrand</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">brand</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>This works, but clutters up the global scope. Think if <code>Guitar</code> had more methods, like <code>getModel</code>, <code>getYear</code>, <code>play</code>, etc.!</p>

<h3>The prototype pattern</h3>

<p>The prototype pattern solves this problem. Every function is created with a <code>prototype</code> property, which is an object containing properties and methods that
should be available to instances of a particular reference type.</p>

<p>Let’s rewrite the previous example to use the prototype pattern:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">Guitar</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">Guitar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">brand</span> <span class="o">=</span> <span class="s2">&quot;Fender&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">Guitar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="s2">&quot;Stratocaster&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">Guitar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="mi">2006</span><span class="p">;</span>
</span><span class='line'><span class="nx">Guitar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;electric&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">Guitar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">alert</span> <span class="k">this</span><span class="p">.</span><span class="nx">brand</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">guitar1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Guitar</span><span class="p">();</span>
</span><span class='line'><span class="nx">guitar1</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">();</span>     <span class="c1">// &quot;Fender&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">guitar2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Guitar</span><span class="p">();</span>
</span><span class='line'><span class="nx">guitar2</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">();</span>     <span class="c1">// &quot;Fender&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">alert</span><span class="p">(</span><span class="nx">guitar1</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">==</span> <span class="nx">guitar2</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">);</span>    <span class="c1">// true</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note that we still call the (now empty) <code>Guitar</code> function as a constructor
to create new guitars and we have the properties and methods present, which
here are shared among instances.</p>

<p><code>guitar1</code> has a property that points to the prototype object. So does <code>guitar2</code>.
(This is known internally as <code>__proto__</code>, which can be examined via the <code>isPrototypeOf()</code> method).
The <code>Guitar</code> constructor function has a member called <code>prototype</code>, which also points to the
prototype object. So,</p>

<ul>
<li><code>guitar1.__proto__</code> points to <code>Guitar</code>’s prototype object</li>
<li><code>guitar2.__proto__</code> points to <code>Guitar</code>’s prototype object</li>
<li><code>Guitar.prototype</code> points to <code>Guitar</code>’s prototype object</li>
</ul>


<p>This protoype object has a <code>constructor</code> property. It also has other
properties and methods as defined by the user. This constructor property points back to the <code>constructor</code> function (<code>Guitar</code>).</p>

<p>Here&rsquo;s alternate prototype syntax:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">Guitar</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">Guitar</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">constructor</span> <span class="o">:</span> <span class="nx">Guitar</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">brand</span> <span class="o">:</span> <span class="s2">&quot;Fender&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">model</span> <span class="o">:</span> <span class="s2">&quot;Stratocaster&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">year</span> <span class="o">:</span> <span class="mi">2006</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">type</span> <span class="o">:</span> <span class="s2">&quot;electric&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">getBrand</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">alert</span> <span class="k">this</span><span class="p">.</span><span class="nx">brand</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">guitar1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Guitar</span><span class="p">();</span>
</span><span class='line'><span class="nx">guitar1</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">();</span>     <span class="c1">// &quot;Fender&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">guitar2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Guitar</span><span class="p">();</span>
</span><span class='line'><span class="nx">guitar2</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">();</span>     <span class="c1">// &quot;Fender&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">alert</span><span class="p">(</span><span class="nx">guitar1</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">==</span> <span class="nx">guitar2</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">);</span>    <span class="c1">// true</span>
</span></code></pre></td></tr></table></div></figure>


<p>It is important to note that it is not possible to overwrite prototype’s values. In other words, if you add a property to an instance that is the same name as a property on the object’s prototype, you create the property on the instance, which shadows the property on the prototype. For example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">guitar2</span><span class="p">.</span><span class="nx">brand</span> <span class="o">=</span> <span class="s2">&quot;PRS&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">guitar2</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">();</span>  <span class="c1">// PRS</span>
</span></code></pre></td></tr></table></div></figure>


<p>To find a property, the javascript compiler performs a two-Step Search order: First it checks the instance for the property/method. If it’s not found there, it then checks the prototype.</p>

<p>There are some problems with this approach. You can’t pass initialization arguments into the constructor–all instances of the object get the same property values by default.</p>

<p>This kinda blows because typically we don’t want all of our object’s properties to have the same values–we want a guitar that’s a Fender brand, we want one that’s a PRS, etc. And yet we still want to take advantage of having methods shared among the various objects. What we need is a combination of approaches.</p>

<h3>The Constructor/Prototype combination pattern</h3>

<p>In the Constructor/Prototype Combination pattern, the constructor defines instance properties, and the prototype defines methods and shared properties. Best of both worlds, right? To do it,
we take a clue from the alternate prototype syntax described above, and explicitly set the constructor
property on the prototype object to point to our constructor function. However, the only other property we define is the method we want shared. Every other property
goes in the constructor function:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">Guitar</span><span class="p">(</span><span class="nx">brand</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">year</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">brand</span> <span class="o">=</span> <span class="nx">brand</span><span class="p">;</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">model</span><span class="p">;</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">year</span><span class="p">;</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">Guitar</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">constructor</span> <span class="o">:</span> <span class="nx">Guitar</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">getBrand</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">brand</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">guitar1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Guitar</span><span class="p">(</span><span class="s2">&quot;Fender&quot;</span><span class="p">,</span> <span class="s2">&quot;Stratocaster&quot;</span><span class="p">,</span> <span class="mi">1963</span><span class="p">,</span> <span class="s2">&quot;electric&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">guitar2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Guitar</span><span class="p">(</span><span class="s2">&quot;Gibson&quot;</span><span class="p">,</span> <span class="s2">&quot;Hummingbird&quot;</span><span class="p">,</span> <span class="mi">1957</span><span class="p">,</span> <span class="s2">&quot;acoustic&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">guitar1</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">();</span>
</span><span class='line'><span class="nx">guitar2</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">();</span>
</span><span class='line'><span class="nx">alert</span><span class="p">(</span><span class="nx">guitar1</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">===</span> <span class="nx">guitar2</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we have our cake and eat it, too: We can create guitars passing
in different initialization parameters for each one, and yet all guitars
share the same <code>getBrand</code> method. Great, huh?</p>
</div>

<div class="meta">
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2014

    Ted Jenkins
. Powered by <a href="http://octopress.org">Octopress</a> | 
    Theme <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'jsbalrog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jsbalrog.github.io/blog/2014/07/16/oo-javascript-creating-objects/';
        var disqus_url = 'http://jsbalrog.github.io/blog/2014/07/16/oo-javascript-creating-objects/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
